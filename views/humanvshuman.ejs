<!doctype html>
<html>
   <head>
      <title>Chessbond</title>
      <!-- Viewport mobile tag for sensible mobile support -->
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <!--STYLES-->
      <link rel="stylesheet" href="/styles/angular-toastr.css">
      <link rel="stylesheet" href="/styles/bootstrap.3.1.1.css">
      <link rel="stylesheet" href="/styles/chessboard-0.3.0.min.css">
      <link rel="stylesheet" href="/styles/importer.css">
      <!--STYLES END-->
      <!--SCRIPTS-->
      <script src="/js/dependencies/sails.io.js"></script>
      <script src="/js/dependencies/angular.1.3.js"></script>
      <script src="/js/dependencies/jquery-1.10.1.min.js"></script>
      <script src="/js/dependencies/chessboard-0.3.0.min.js"></script>
      <script src="/js/dependencies/chess.min.js"></script>
      <script src="/js/dependencies/stockfish.js"></script>
      <script src="/js/dependencies/angular-toastr.js"></script>
      <script src="/js/dependencies/bootstrap.min.js"></script>
      <script src="/js/dependencies/compareTo.module.js"></script>
      <script src="/js/dependencies/enginegame.js"></script>
      <script src="/js/HomepageModule.js"></script>
      <script src="/js/HomepageController.js"></script>
      <script src="/js/RegisterController.js"></script>
      <script src="/js/SinglePlayerController.js"></script>
      <script src="/js/TwoPlayerController.js"></script>
      <!--SCRIPTS END-->
   </head>
   <body ng-app="HomepageModule" ng-controller="TwoPlayerController" ng-mousemove="changeFavicon('https://www.chessbond.com/favicon.ico')" ng-focus="PlayBell()" ng-cloak>
      
      <!-- Trigger the modal with a button -->

<!-- Modal -->
<div id="SoundModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Chessbond</h4>
      </div>
      <div class="modal-body">
        <p>Ready to begin? (this enables sound)</p>
      </div>
      <div class="modal-footer">
        <button type="button" ng-click="EnableSound()" class="btn btn-default" data-dismiss="modal">Yes</button>
      </div>
    </div>

  </div>
</div>
      
      <%- include partials/navbar.ejs %>
     <!-- <p>Game Id is   <%-req.param('GameID')%></p>-->
      <script> var GameID='<%- req.param('GameID') %>'</script>
      <% if (!req.session.passport){ %>
      <div ng-init="Guest()"></div>
      <% } %>
		<% if (req.session.passport){ %>
		<% if (req.session.passport.user){ %>
       	<div ng-init="SoleConnectorFunction('<%- req.session.passport.user %>')"></div>

        
       <%}%>
       <%}%>
     <% if (req.session.passport){ %>
	<% if (req.session.passport.user){ %>
     <!-- <button class="btn btn-success" ng-click="EnableSound()">Enable Sound</button>-->
     
      <button class="btn btn-success" ng-click="ShowOptions=!ShowOptions">Show Options</button>
      <table ng-hide="ShowOptions">
         <tr>
            <td>
               <span class="label label-default">Chesspiece Theme</span>
               <select class="form-control"
                  ng-model="User.ChessPieceTheme"
                  name="string"
                  multiple="string"
                  required="string"
                  ng-required="string"
                  ng-change="PrefSelectChanged('ChessPieceTheme','<%-req.session.passport.user%>',resetBoard)"
                  >
                  <option ng-repeat="theme in piecethemes" value="{{theme}}">
                     {{theme}}
                  </option>
               </select>
            </td>
            
                 <td>
               <span class="label label-default">Board Theme</span>
               <select class="form-control"
                  ng-model="User.BoardTheme"
                  name="string"
                  multiple="string"
                  required="string"
                  ng-required="string"
                  ng-change="PrefSelectChanged('BoardTheme','<%-req.session.passport.user%>',colorBoard)"
                  >
                  <option ng-repeat="theme in boardthemes" value="{{theme}}">
                     {{theme}}
                  </option>
               </select>
            </td>
            
            <td>
               <button ng-click="PrefToggleButtonClicked('SoundEnabled','<%-req.session.passport.user%>','Sound Enabled','Sound Disabled')" class="btn btn-success">{{User.SoundEnabled}}</button>
            </td>
             <td>
               <span class="label label-default">Volume Level</span>
               <select class="form-control"
                  ng-model="User.SoundVolume"
                  name="string"
                  multiple="string"
                  required="string"
                  ng-required="string"
                  ng-change="PrefSelectChanged('SoundVolume','<%-req.session.passport.user%>',setVolume)"
                  >
                  <option ng-repeat="vol in soundvolumes" value="{{vol}}">
                     {{vol}}
                  </option>
               </select>
            </td>
            <td>
               <span class="label label-default">Board Size</span>
               <select name="repeatSelect" class="form-control" id="repeatSelect" ng-model="User.BoardSize"   ng-change="PrefSelectChanged('BoardSize','<%-req.session.passport.user%>', resizeBoard)"
                  >
                  <option ng-repeat="option in boardsizes" value="{{option.value}}">{{option.name}}</option>
               </select>
            </td>
               <td>
               <span class="label label-default">Board Orientation</span>
               <select name="repeatSelect" class="form-control" id="repeatSelect" ng-model="User.BoardOrientation"   ng-change="PrefSelectChanged('BoardOrientation','<%-req.session.passport.user%>', reorientBoard)"
                  >
                  <option ng-repeat="option in boardorientations" value="{{option.value}}">{{option.name}}</option>
               </select>
            </td>
         </tr>
      </table>
      <%}%>
      <%}%>
	<%- include partials/board.ejs %>
  
   </body>
</html>