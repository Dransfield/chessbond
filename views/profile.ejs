<!DOCTYPE html>
<html>
  <head>
    <title>Chessbond</title>

    <!-- Viewport mobile tag for sensible mobile support -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


    <!--STYLES-->
    <link rel="stylesheet" href="/styles/angular-toastr.css">
    <link rel="stylesheet" href="/styles/bootstrap.3.1.1.css">
    <link rel="stylesheet" href="/styles/chessboard-0.3.0.min.css">
    <link rel="stylesheet" href="/styles/importer.css">
    <!--STYLES END-->

    <!--Added this so the client has access to the csrf tag and it's grabbed first service side on every page -->


  </head>

  <body ng-app="HomepageModule" ng-controller="HomepageController" ng-cloak>
   <% if (req.session.passport){ %>
	<% if (req.session.passport.user){ %>
	<div ng-init="SoleConnectorFunction('<%- req.session.passport.user %>')"></div>
	 <% } %>
   <% } %>

   <%- include partials/navbar.ejs %>
    <div class=" col-md-8 col-md-offset-2">
    <div  ng-show="SoleConnectorVariable=='true'" class="jumbotron">
        <h1>Profile</h1>
         <% if (req.session.passport){ %>
			<% if (req.session.passport.user){ %>
          <h2>Highest Difficulty Level Beaten:{{User.DifficultyLevelBeaten}}</h2>
            <h2>ELO rating score:{{User.ELO}}</h2>
         
           <% } %>
           <% } %>
            <a href="/playvsai" class="btn btn-lg btn-success">Play Chess against the AI!</a>
	
	 </div>
    </div>
    
       <% if (req.session.passport){ %>
			<% if (req.session.passport.user){ %>
   <div  ng-show="SoleConnectorVariable=='true'" id="row">
    <div class="col-md-4">
		</div>
    <div class="col-md-4">

	 <select class="form-control" name="mySelect" id="mySelect"
      ng-model="User.Country"
      ng-change="PrefSelectChanged('Country','<%-req.session.passport.user%>',null)"
      >
      <option ng-repeat="c in countries track by $index" value="{{c.name}}">
		  {{c.name}}</option>
					
				</select>
	</div>
		
		 <div class="col-md-4">
	 
	<img src="/images/flags/{{countryTofilename(User.Country)}}.png">
	</div>
	<div class="col-md-4">
	 <div>
	<div class="col-md-12">
	 <h2 class="sub-header">Recent Games</h2>
          <div class="table-responsive">
            <table class="table table-striped">
              
		
			<thead>
                <tr>
	              <th>Player1</th>
                  <th>Player2</th>
                  
				<!--HEADERS OF TABLE-->
                </tr>
           </thead>
           <tbody>
				  
            <tr ng-repeat="game in joinedgames track by $index">
			<td>{{game.Player1Name}}</td>
			<td>{{game.Player2Name}}</td>
			
			<td>
				<button ng-click="PlayGame(game.id,game.Player2)" class="btn btn-lg btn-success" >Play Game</a>
				<button ng-click="deletegame(game.id,'<%-  req.session.passport.user %>')">Delete Game</button>
			</td>
			
			</tr>
            </tbody>
            </table>
          </div>
          </div>
          
	  <% } %>
           <% } %>
	</div>
	</div>




    <!--SCRIPTS-->
    <script src="/js/dependencies/sails.io.js"></script>
    <script src="/js/dependencies/angular.1.3.js"></script>
    <script src="/js/dependencies/jquery-1.10.1.min.js"></script>
    <script src="/js/dependencies/chessboard-0.3.0.min.js"></script>
    <script src="/js/dependencies/chess.min.js"></script>
    <script src="/js/dependencies/stockfish.js"></script>
    <script src="/js/dependencies/angular-toastr.js"></script>
    <script src="/js/dependencies/bootstrap.min.js"></script>
    <script src="/js/dependencies/compareTo.module.js"></script>
    <script src="/js/dependencies/enginegame.js"></script>
    <script src="/js/HomepageModule.js"></script>
    <script src="/js/HomepageController.js"></script>
    <script src="/js/RegisterController.js"></script>
    <script src="/js/SinglePlayerController.js"></script>
    <script src="/js/TwoPlayerController.js"></script>
    <!--SCRIPTS END-->
  </body>
</html>
